# 상품 데이터 이관 가이드

스마트스토어에서 내보낸 상품 데이터를 CSV 또는 Excel 파일로 업로드하여 자사몰에 일괄 등록하는 방법입니다.

## 📋 목차

1. [파일 준비하기](#1-파일-준비하기)
2. [파일 형식 확인](#2-파일-형식-확인)
3. [상품 이관 페이지 접속](#3-상품-이관-페이지-접속)
4. [파일 업로드](#4-파일-업로드)
5. [파싱 결과 확인](#5-파싱-결과-확인)
6. [카테고리 매핑](#6-카테고리-매핑)
7. [상품 이관 실행](#7-상품-이관-실행)
8. [이관 결과 확인](#8-이관-결과-확인)

---

## 1. 파일 준비하기

### 스마트스토어에서 상품 데이터 내보내기

1. 스마트스토어 관리자 페이지 접속
2. **상품 관리** → **상품 목록** 메뉴로 이동
3. 내보낼 상품 선택 또는 전체 선택
4. **엑셀 다운로드** 또는 **CSV 다운로드** 클릭
5. 다운로드된 파일 확인

### 파일 형식

- ✅ **CSV 파일** (`.csv`) - 지원
- ✅ **Excel 파일** (`.xlsx`, `.xls`) - 지원
- ❌ 기타 형식은 지원하지 않습니다

---

## 2. 파일 형식 확인

다운로드한 파일을 열어서 다음 컬럼이 있는지 확인하세요.

### 필수 컬럼 (반드시 있어야 함)

| 컬럼명     | 설명             | 예시                  |
| ---------- | ---------------- | --------------------- |
| **상품명** | 상품의 이름      | "헬로키티 인형 키링"  |
| **판매가** | 상품의 판매 가격 | "25000" 또는 "25,000" |
| **재고**   | 상품의 재고 수량 | "10"                  |

### 선택 컬럼 (있으면 더 좋음)

| 컬럼명         | 설명                          | 예시                                                        |
| -------------- | ----------------------------- | ----------------------------------------------------------- |
| **할인가**     | 할인된 가격                   | "20000"                                                     |
| **카테고리**   | 상품 카테고리                 | "산리오", "키링"                                            |
| **상품설명**   | 상품 설명                     | "귀여운 헬로키티 인형 키링입니다"                           |
| **대표이미지** | 대표 이미지 URL               | "https://example.com/image1.jpg"                            |
| **이미지URL**  | 추가 이미지 URL (콤마로 구분) | "https://example.com/img1.jpg,https://example.com/img2.jpg" |
| **상품코드**   | 상품 코드 (SKU)               | "PROD-001"                                                  |
| **상태**       | 판매 상태                     | "판매중", "판매중지", "품절"                                |
| **베스트상품** | 베스트 상품 여부              | "예", "Y", "true", "1"                                      |
| **신상품**     | 신상품 여부                   | "예", "Y", "true", "1"                                      |

### 옵션 정보 컬럼 (옵션이 있는 상품인 경우)

| 컬럼명           | 설명                           | 예시                          |
| ---------------- | ------------------------------ | ----------------------------- |
| **옵션명**       | 옵션 이름                      | "색상", "사이즈"              |
| **옵션값**       | 옵션 값 (콤마로 구분)          | "빨강,파랑,노랑" 또는 "S,M,L" |
| **옵션재고**     | 옵션별 재고 (콤마로 구분)      | "10,5,8"                      |
| **옵션가격조정** | 옵션별 가격 조정 (콤마로 구분) | "0,1000,-500"                 |

### 📝 파일 예시

**CSV 파일 예시:**

```csv
상품명,판매가,할인가,재고,카테고리,대표이미지,이미지URL,상태,베스트상품,신상품
헬로키티 인형 키링,25000,20000,10,산리오,https://example.com/main.jpg,https://example.com/img1.jpg,https://example.com/img2.jpg,판매중,예,예
```

**Excel 파일 예시:**
| 상품명 | 판매가 | 할인가 | 재고 | 카테고리 | 대표이미지 | 상태 |
|--------|--------|--------|------|----------|------------|------|
| 헬로키티 인형 키링 | 25000 | 20000 | 10 | 산리오 | https://... | 판매중 |

---

## 3. 상품 이관 페이지 접속

1. 관리자 계정으로 로그인
2. 브라우저에서 다음 주소로 이동:
   ```
   http://localhost:3000/admin/products
   ```
3. **"상품 이관"** 버튼 클릭
   - 또는 직접 주소 입력: `http://localhost:3000/admin/products/import`

---

## 4. 파일 업로드

1. 상품 이관 페이지에서 **"1. 파일 업로드"** 섹션 확인
2. **"파일 선택"** 버튼 클릭
3. 파일 탐색기에서 준비한 CSV 또는 Excel 파일 선택
4. 파일이 선택되면 파일명이 표시됩니다

### ⚠️ 주의사항

- 파일 크기는 최대 10MB까지 지원됩니다
- 한 번에 많은 상품을 업로드할 경우 시간이 걸릴 수 있습니다
- 파일이 업로드되면 자동으로 파싱이 시작됩니다

---

## 5. 파싱 결과 확인

파일이 업로드되면 자동으로 파싱이 시작되고, **"2. 파싱 결과 미리보기"** 섹션에 결과가 표시됩니다.

### 확인할 내용

1. **요약 정보**

   - 총 상품 수: 파싱된 상품 개수
   - 성공: 정상적으로 파싱된 상품 수
   - 에러: 파싱 중 오류가 발생한 상품 수
   - 경고: 주의가 필요한 상품 수

2. **에러 목록** (빨간색 박스)

   - 에러가 있으면 행 번호와 에러 메시지 확인
   - 예: "행 3: 상품명이 없습니다."
   - 에러가 있는 행은 이관되지 않습니다

3. **경고 목록** (노란색 박스)

   - 경고는 이관은 되지만 주의가 필요한 항목
   - 예: "행 5: 이미지가 없습니다."
   - 경고는 확인만 하고 넘어가면 됩니다

4. **상품 목록 테이블**
   - 파싱된 모든 상품이 표로 표시됩니다
   - 각 상품의 정보를 확인할 수 있습니다

---

## 6. 카테고리 매핑

각 상품의 **카테고리** 컬럼에서 자사몰의 카테고리를 선택해야 합니다.

### 카테고리 선택 방법

1. 상품 목록 테이블에서 각 행의 **"카테고리"** 드롭다운 확인
2. 드롭다운을 클릭하여 자사몰의 카테고리 선택
   - 예: "산리오", "캐릭터", "키링/지비츠" 등
3. 모든 상품에 카테고리를 선택해야 이관 버튼이 활성화됩니다

### ⚠️ 중요

- **카테고리를 선택하지 않은 상품은 이관되지 않습니다**
- 스마트스토어의 카테고리명과 자사몰의 카테고리명이 다를 수 있으므로 수동으로 매핑해야 합니다
- 여러 상품이 같은 카테고리를 사용하는 경우, 각각 선택해야 합니다

---

## 7. 상품 이관 실행

모든 준비가 완료되면 상품을 실제로 이관할 수 있습니다.

### 실행 단계

1. **"3. 상품 이관 실행"** 섹션 확인
2. 이관할 상품 수 확인
3. **"상품 이관 실행"** 버튼 클릭
4. 확인 메시지에서 **"확인"** 클릭

### 이관 과정

- 각 상품이 순차적으로 생성됩니다
- 이미지가 있는 경우, 외부 URL에서 다운로드하여 Supabase Storage에 업로드됩니다
- 이관 중에는 **"이관 중..."** 메시지가 표시됩니다
- 이관이 완료되면 결과가 표시됩니다

### ⏱️ 예상 소요 시간

- 상품 10개: 약 30초 ~ 1분
- 상품 30개: 약 2 ~ 3분
- 이미지가 많은 경우 더 오래 걸릴 수 있습니다

---

## 8. 이관 결과 확인

이관이 완료되면 결과가 표시됩니다.

### 성공한 경우 (초록색 박스)

```
✅ 10개 상품이 성공적으로 이관되었습니다.
성공: 10개
```

- 성공 메시지가 표시됩니다
- 2초 후 자동으로 상품 목록 페이지로 이동합니다

### 일부 실패한 경우 (빨간색 박스)

```
❌ 8개 상품이 성공적으로 이관되었습니다. (2개 실패)
성공: 8개
실패: 2개
```

- 실패한 상품 목록과 실패 이유가 표시됩니다
- 성공한 상품은 정상적으로 등록되었습니다

### 확인 방법

1. **상품 목록 페이지로 이동**
   - `http://localhost:3000/admin/products`
2. 이관된 상품이 목록에 표시되는지 확인
3. 상품을 클릭하여 상세 정보 확인
   - 이미지가 정상적으로 표시되는지 확인
   - 가격, 재고, 옵션 등이 올바르게 저장되었는지 확인

---

## 🔧 문제 해결

### 파일이 업로드되지 않을 때

- 파일 형식 확인 (CSV 또는 Excel만 지원)
- 파일 크기 확인 (10MB 이하)
- 브라우저 콘솔에서 에러 메시지 확인 (F12)

### 파싱 에러가 많이 발생할 때

- 필수 컬럼(상품명, 판매가, 재고)이 있는지 확인
- 컬럼명이 정확한지 확인 (띄어쓰기, 대소문자 주의)
- 숫자 형식 확인 (콤마 제거 필요할 수 있음)

### 이미지가 업로드되지 않을 때

- 이미지 URL이 유효한지 확인
- 외부 서버에서 이미지를 다운로드할 수 있는지 확인
- 이미지 크기가 10MB 이하인지 확인
- 이미지 형식이 지원되는지 확인 (JPEG, PNG, WebP, GIF)

### 카테고리를 선택할 수 없을 때

- 자사몰에 해당 카테고리가 등록되어 있는지 확인
- 관리자 페이지에서 카테고리를 먼저 생성

### 이관이 실패할 때

- 브라우저 콘솔에서 에러 메시지 확인 (F12)
- 서버 로그 확인
- 네트워크 연결 확인
- Supabase Storage 버킷이 생성되었는지 확인

---

## 💡 팁

1. **작은 단위로 테스트**

   - 처음에는 1~2개 상품으로 테스트해보세요
   - 문제없으면 점진적으로 늘려가세요

2. **백업**

   - 이관하기 전에 기존 데이터를 백업하세요
   - 실수로 잘못된 데이터를 이관할 경우를 대비하세요

3. **이미지 최적화**

   - 이미지 크기를 미리 최적화하면 업로드 속도가 빨라집니다
   - WebP 형식을 사용하면 용량을 줄일 수 있습니다

4. **카테고리 매핑 규칙**
   - 자주 사용하는 카테고리는 메모해두면 편리합니다
   - 스마트스토어 카테고리명과 자사몰 카테고리명 매핑표를 만들어두면 좋습니다

---

## 📞 추가 도움

문제가 발생하거나 질문이 있으면:

1. 브라우저 콘솔(F12)에서 에러 메시지 확인
2. 서버 로그 확인
3. 개발팀에 문의

---

**마지막 업데이트:** 2025년 6월 3일
