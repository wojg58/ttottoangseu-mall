# í†µí•© ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ ê°€ì´ë“œ

## ğŸ“‹ ê°œìš”

ì´ ë””ë ‰í† ë¦¬ì—ëŠ” **ê¸°ì¡´ ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ë“¤**ê³¼ **ìƒˆ í†µí•© ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ë“¤**ì´ í•¨ê»˜ ìˆìŠµë‹ˆë‹¤.

- **ê¸°ì¡´ íŒŒì¼ë“¤** (2024ë…„ 12ì›” ~ 2026ë…„ 1ì›” 8ì¼): í˜„ì¬ í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš© ì¤‘
- **í†µí•© íŒŒì¼ë“¤** (2026ë…„ 1ì›” 10ì¼): ìƒˆ í™˜ê²½ì—ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•œ í†µí•© ë²„ì „

## ğŸ¯ í†µí•© ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ ëª©ë¡

| íŒŒì¼ëª… | ì„¤ëª… | í¬í•¨ ë‚´ìš© |
|--------|------|-----------|
| `20260110000000_initial_schema_consolidated.sql` | ì´ˆê¸° ìŠ¤í‚¤ë§ˆ | users, categories, products, product_images, product_variants, carts, cart_items, orders, order_items, payments, refunds |
| `20260110000001_users_and_auth_consolidated.sql` | ì‚¬ìš©ì ë° ì¸ì¦ | member_additional_info, clerk_user_id ì œì•½ì¡°ê±´ |
| `20260110000002_product_categories_many_to_many_consolidated.sql` | ìƒí’ˆ-ì¹´í…Œê³ ë¦¬ ê´€ê³„ | product_categories ì¤‘ê°„ í…Œì´ë¸”, ë™ê¸°í™” íŠ¸ë¦¬ê±° |
| `20260110000003_naver_smartstore_sync_consolidated.sql` | ë„¤ì´ë²„ ìŠ¤ë§ˆíŠ¸ìŠ¤í† ì–´ ì—°ë™ | naver_sync_queue í…Œì´ë¸” |
| `20260110000004_coupons_consolidated.sql` | ì¿ í° ì‹œìŠ¤í…œ | coupons í…Œì´ë¸”, orders.coupon_id |
| `20260110000005_chat_consolidated.sql` | ì±„íŒ… ì‹œìŠ¤í…œ | chat_sessions, chat_messages |
| `20260110000006_reviews_inquiries_consolidated.sql` | ë¦¬ë·° ë° ë¬¸ì˜ | reviews, inquiries |
| `20260110000007_storage_consolidated.sql` | ìŠ¤í† ë¦¬ì§€ ë²„í‚· | uploads, product-images ë²„í‚· ë° RLS ì •ì±… |
| `20260110000008_categories_final_consolidated.sql` | ì¹´í…Œê³ ë¦¬ ìµœì¢… | ì¹´í…Œê³ ë¦¬ ë°ì´í„° ì´ˆê¸° ì‚½ì… ë° ì—…ë°ì´íŠ¸ |

## âœ… í˜„ì¬ í”„ë¡œì íŠ¸ì— ì˜í–¥ ì—†ìŒ

**ì¤‘ìš”**: í†µí•© ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ë“¤ì€ **íƒ€ì„ìŠ¤íƒ¬í”„ê°€ ë¯¸ë˜(2026ë…„ 1ì›” 10ì¼)**ì´ë¯€ë¡œ, í˜„ì¬ í”„ë¡œì íŠ¸ì—ì„œëŠ” **ìë™ìœ¼ë¡œ ì‹¤í–‰ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤**.

- ê¸°ì¡´ ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ë“¤: 2024ë…„ 12ì›” ~ 2026ë…„ 1ì›” 8ì¼
- í†µí•© ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ë“¤: 2026ë…„ 1ì›” 10ì¼

SupabaseëŠ” íƒ€ì„ìŠ¤íƒ¬í”„ ìˆœì„œë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ì‹¤í–‰í•˜ë¯€ë¡œ, ì´ë¯¸ ì‹¤í–‰ëœ ë§ˆì´ê·¸ë ˆì´ì…˜ì€ ë‹¤ì‹œ ì‹¤í–‰í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

## ğŸš€ ìƒˆ í™˜ê²½ì—ì„œ ì‚¬ìš© ë°©ë²•

### ë°©ë²• 1: ìƒˆ í”„ë¡œì íŠ¸ ì‹œì‘ ì‹œ

ìƒˆ Supabase í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•  ë•Œ í†µí•© íŒŒì¼ë“¤ë§Œ ì‚¬ìš©:

```bash
# 1. ê¸°ì¡´ ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ë“¤ì„ ì„ì‹œë¡œ ë‹¤ë¥¸ í´ë”ë¡œ ì´ë™
mkdir supabase/migrations_old
mv supabase/migrations/2024* supabase/migrations_old/
mv supabase/migrations/2025* supabase/migrations_old/
mv supabase/migrations/2026010* supabase/migrations_old/
mv supabase/migrations/setup_* supabase/migrations_old/
mv supabase/migrations/update_* supabase/migrations_old/

# 2. í†µí•© íŒŒì¼ë“¤ë§Œ ë‚¨ê¹€
# (20260110000000_ë¡œ ì‹œì‘í•˜ëŠ” íŒŒì¼ë“¤ë§Œ ë‚¨ìŒ)

# 3. ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰
supabase db reset
```

### ë°©ë²• 2: ë¡œì»¬ ê°œë°œ í™˜ê²½ ë¦¬ì…‹

ë¡œì»¬ ê°œë°œ í™˜ê²½ì„ ì™„ì „íˆ ë¦¬ì…‹í•˜ê³  í†µí•© íŒŒì¼ë“¤ë¡œ ì‹œì‘:

```bash
# 1. Supabase ë¡œì»¬ í™˜ê²½ ì¤‘ì§€
supabase stop

# 2. ê¸°ì¡´ ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ ë°±ì—…
cp -r supabase/migrations supabase/migrations_backup

# 3. í†µí•© íŒŒì¼ë“¤ë§Œ ì‚¬ìš©í•˜ë„ë¡ ì„¤ì • (ë°©ë²• 1 ì°¸ê³ )

# 4. Supabase ë¡œì»¬ í™˜ê²½ ì¬ì‹œì‘
supabase start
```

## ğŸ“ í†µí•© íŒŒì¼ì˜ íŠ¹ì§•

### 1. ì•ˆì „í•œ ì‹¤í–‰
- ëª¨ë“  `CREATE` ë¬¸ì— `IF NOT EXISTS` ì‚¬ìš©
- ëª¨ë“  `ALTER` ë¬¸ì— ì¡°ê±´ë¶€ ì‹¤í–‰ ë¡œì§ í¬í•¨
- ì¤‘ë³µ ì‹¤í–‰í•´ë„ ì—ëŸ¬ ì—†ìŒ

### 2. ì™„ì „í•œ ìŠ¤í‚¤ë§ˆ
- ì´ˆê¸° ìŠ¤í‚¤ë§ˆë¶€í„° ëª¨ë“  ê¸°ëŠ¥ê¹Œì§€ í¬í•¨
- ì˜ì¡´ì„± ìˆœì„œ ê³ ë ¤í•˜ì—¬ ì •ë ¬
- ì™¸ë˜í‚¤, ì¸ë±ìŠ¤, íŠ¸ë¦¬ê±° ëª¨ë‘ í¬í•¨

### 3. ê°œë°œ í™˜ê²½ ìµœì í™”
- RLS ë¹„í™œì„±í™” (ê°œë°œ í™˜ê²½)
- ëª¨ë“  í…Œì´ë¸”ì— ê¶Œí•œ ë¶€ì—¬
- ì£¼ì„ ë° ì„¤ëª… í¬í•¨

## ğŸ”„ ê¸°ì¡´ íŒŒì¼ê³¼ì˜ ê´€ê³„

### ê¸°ì¡´ íŒŒì¼ë“¤ (ê·¸ëŒ€ë¡œ ìœ ì§€)
- `20241225000000_create_member_additional_info.sql`
- `20250101000000_add_clerk_user_id_unique_constraint.sql`
- `20250115000000_add_product_categories_many_to_many.sql`
- ... (ê¸°íƒ€ ëª¨ë“  ê¸°ì¡´ íŒŒì¼ë“¤)

### í†µí•© íŒŒì¼ë“¤ (ìƒˆë¡œ ì¶”ê°€)
- `20260110000000_initial_schema_consolidated.sql` â† ê¸°ì¡´ ì—¬ëŸ¬ íŒŒì¼ í†µí•©
- `20260110000001_users_and_auth_consolidated.sql` â† ê¸°ì¡´ 2ê°œ íŒŒì¼ í†µí•©
- ... (ê¸°íƒ€ í†µí•© íŒŒì¼ë“¤)

## âš ï¸ ì£¼ì˜ì‚¬í•­

1. **ê¸°ì¡´ í”„ë¡œë•ì…˜ í™˜ê²½**: ì ˆëŒ€ í†µí•© íŒŒì¼ì„ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”. ê¸°ì¡´ íŒŒì¼ë“¤ë§Œ ì‚¬ìš©í•©ë‹ˆë‹¤.

2. **ìƒˆ í™˜ê²½ì—ì„œë§Œ ì‚¬ìš©**: í†µí•© íŒŒì¼ë“¤ì€ ìƒˆ í”„ë¡œì íŠ¸ë‚˜ ë¡œì»¬ ê°œë°œ í™˜ê²½ ë¦¬ì…‹ ì‹œì—ë§Œ ì‚¬ìš©í•©ë‹ˆë‹¤.

3. **ë°ì´í„° ë°±ì—…**: ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰ ì „ í•­ìƒ ë°ì´í„°ë¥¼ ë°±ì—…í•˜ì„¸ìš”.

4. **ìˆœì„œ ì¤‘ìš”**: í†µí•© íŒŒì¼ë“¤ì€ ë²ˆí˜¸ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰ë˜ì–´ì•¼ í•©ë‹ˆë‹¤ (íƒ€ì„ìŠ¤íƒ¬í”„ ìˆœì„œ).

## ğŸ“š ì°¸ê³  ìë£Œ

- [Supabase ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ](https://supabase.com/docs/guides/cli/local-development#database-migrations)
- [PostgreSQL ë§ˆì´ê·¸ë ˆì´ì…˜ ëª¨ë²” ì‚¬ë¡€](https://www.postgresql.org/docs/current/ddl-alter.html)

---

**ì‘ì„±ì¼**: 2026ë…„ 1ì›” 10ì¼  
**ëª©ì **: ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ ë¦¬íŒ©í† ë§ ë° í†µí•©

